set statefile "/home/vekh/webapps/hacktive/tmp/.monit.state"

set httpd port 2812 and
    use address localhost
    allow localhost
    allow admin:monit

check process web
	with pidfile /var/run/nginx.pid
  start program = "/home/vekh/webapps/hacktive/bin/monit/web start"
  stop program = "/home/vekh/webapps/hacktive/bin/monit/web stop"

check process resque_scheduler
  matching "resque-scheduler"
  start program = "/home/vekh/webapps/hacktive/bin/monit/resque/scheduler start"
    with timeout 60 seconds
  stop program = "/home/vekh/webapps/hacktive/bin/monit/resque/scheduler stop"
  group resque

check process resque_github_fetch
  matching "resque-.*github_fetch"
  start program = "/home/vekh/webapps/hacktive/bin/monit/resque/worker start github_fetch"
    with timeout 60 seconds
  stop program = "/home/vekh/webapps/hacktive/bin/monit/resque/worker stop github_fetch"
  group resque
